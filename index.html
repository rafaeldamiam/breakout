<!DOCTYPE html>
<html>
	<head>
    	<meta charset="utf-8">
    	<title>Breakout</title>
    	<link href="https://fonts.googleapis.com/css?family=Audiowide" rel="stylesheet">
	</head>
<body>
	<p id="txt1">BREAKOUT</p>
	<p id="txt2">Feito por:<br>
	Rafael Leandro Damiam<br>
	Lucas Fernando Cavalherie</p>
<canvas id="canvas" width="500" height="300"></canvas>
<div id="pause" onmousedown="scriptT()"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAclBMVEX///8AAAC+vr7s7Ozu7u709PTx8fH8/Pz5+fnp6ekjIyO7u7sXFxfIyMh9fX2tra0LCwttbW0vLy9gYGDh4eHU1NSnp6c7OztISEiFhYWZmZlNTU2MjIxAQEAoKCh0dHRUVFRiYmKenp40NDQcHBzX19cik/FzAAACvElEQVR4nO3bi1IaQRCFYc6KJHiJSLwkmhgD8f1fUSCWQXfY7blU9el4vieYv1ilq2eZTERERERERERERERERERERERERD6G2WfvEzTSrY68j9BGh9unmfchWugA/Jp+8j5GvW0IFhfxn69dCPBtfux9kkovIcD3o9jP12sI/nRT78PU+BcC3E8Df6nshwA/4v7Rvw3Bw3nU5+tdCPD1OObz1QsBVnPvQ5VIhGB9HXBoSYUAl/GGlnRIwKHlQAjw8yrW0HIwBPgS6kMZCMHZaaCUoZDN0DIP86UyHLIZWqJ8qYyF4CTI0DIaEmVoMYQAdwH+6E0hWF7TP1+2kM3zNSMfWqwhWNxw//8yhwC31ENLRgj3Ji8rhHloyQsh3uTlhmw3ed5nTsoPId3kFYQAj4SbvKIQxqG4MAQP52SbltIQ4DfXUFweAlBdP9aEYE10/VgVwrTJqwzh2eTVhtBs8upDSDZ5LUIohuImIQybvEYh/kNLsxDvTV67EOdNXssQ103eRdMQrN1K2n4ijhNxy5Cl521ww5A713/AzUIenV/zbBRy4r5ZaRNCsOtqEUKxfawPYRh9Jw1CWDb0lSE8dyZVIUy3WDUhl0z3iuUhrgNJX3EI2917YQjf2xBFIYzvp5SEeO8ZkvJD/Dc/SbkhJANJX2YIxXY0KSuEZF+dlBFCc4OQZA/hudNJsoYsiW7Zkowhqyvvg44xhfANJH2GkBi/8hkPCfK7q7EQxvdnkoZDON9oShoMIdi7mQ2EUOzdzA6GcA8kfYdCWPZuZukQnr2bWSpkcRPrqdpJhFDt3cx6IWR7N7P3IWx7N7O3Id4XgRX2Qxj3bmZ7IZR7N7PXkPtQA0nfS8jZaeCnaudvCO/ezWwbwrx3M+vCjbkHdOR7N7N5zIFERERERERERERERERERERERERERET+a8/cMB3VRPNXxwAAAABJRU5ErkJggg==" width="47" height="47"></img></div>

<style type="text/css">
	body{
        background-color: #302f2f;
      }
      #txt1{
        font-family: 'Audiowide', cursive;
        font-size: 32px;
        color: #e50d0d;
        margin: 30px;
        position: absolute;
      }
      #txt2{
        font-family: 'Audiowide', cursive;
        font-size: 14px;
        color: #e50d0d;
        margin: 70px;
        position: absolute;right: 20px; top: 65%;
      }
      #canvas{
        border-color: black;
        border-style: solid;
        border-bottom-color: red; 
        background-color: #a39c97;
        position: fixed; left: 30%; top: 15%;
      }
      #pause{
        position: absolute; top: 450px; left: 48%;
        width: 47px;
        height: 47px;
        background-color:#8f9091; 
      }
</style>
<script>
function scriptT(){
	var canvas = document.getElementById("canvas");
	var ctx = canvas.getContext("2d");
	var b = 10;
	var x = canvas.width/2;
	var y = canvas.height-30;
	var dx = 2;
	var dy = -2;
	var altpad = 10;
	var largpad = 75;
	var paddleX = (canvas.width-largpad)/2;
	var presdir = false;
	var presesq = false;
	var contlinbroc = 5;
	var contcolbroc = 3;
	var largbloc = 75;
	var altbloc = 20;
	var padbloc = 10;
	var bloctop = 30;
	var blocesq = 30;
	var score = 0;
	var lives = 3;

	var bricks = [];
	for(c=0; c<contcolbroc; c++) {
	    bricks[c] = [];
	    for(r=0; r<contlinbroc; r++) {
	        bricks[c][r] = { x: 0, y: 0, status: 1 };
	    }
	}

	document.addEventListener("keydown", tratarteclapres, false);
	document.addEventListener("keyup", tratartecladespre, false);
	document.addEventListener("mousemove", mexemouse, false);

	function tratarteclapres(e) {
	    if(e.keyCode == 39) {
	        presdir = true;
	    }
	    else if(e.keyCode == 37) {
	        presesq = true;
	    }
	}
	function tratartecladespre(e) {
	    if(e.keyCode == 39) {
	        presdir = false;
	    }
	    else if(e.keyCode == 37) {
	        presesq = false;
	    }
	}
	function mexemouse(e) {
	    var relativeX = e.clientX - canvas.offsetLeft;
	    if(relativeX > 0 && relativeX < canvas.width) {
	        paddleX = relativeX - largpad/2;
	    }
	}
	function detectacoli() {
	    for(c=0; c<contcolbroc; c++) {
	        for(r=0; r<contlinbroc; r++) {
	            var b = bricks[c][r];
	            if(b.status == 1) {
	                if(x > b.x && x < b.x+largbloc && y > b.y && y < b.y+altbloc) {
	                    dy = -dy;
	                    b.status = 0;
	                    score++;
	                    if(score == contlinbroc*contcolbroc) {
	                        alert("Parabéns! Você Venceu!!!");
	                        document.location.reload();
	                    }
	                }
	            }
	        }
	    }
	}

	function desenhaBola() {
	    ctx.beginPath();
	    ctx.arc(x, y, b, 0, Math.PI*2);
	    ctx.fillStyle = "#e50d0d";
	    ctx.fill();
	    ctx.closePath();
	}
	function desenhapad() {
	    ctx.beginPath();
	    ctx.rect(paddleX, canvas.height-altpad, largpad, altpad);
	    ctx.fillStyle = "#053ec1";
	    ctx.fill();
	    ctx.closePath();
	}
	function desenhabloc() {
	    for(c=0; c<contcolbroc; c++) {
	        for(r=0; r<contlinbroc; r++) {
	            if(bricks[c][r].status == 1) {
	                var brickX = (r*(largbloc+padbloc))+blocesq;
	                var brickY = (c*(altbloc+padbloc))+bloctop;
	                bricks[c][r].x = brickX;
	                bricks[c][r].y = brickY;
	                ctx.beginPath();
	                ctx.rect(brickX, brickY, largbloc, altbloc);
	                ctx.fillStyle = "#053ec1";
	                ctx.fill();
	                ctx.closePath();
	            }
	        }
	    }
	}
	function desenhascore() {
	    ctx.font = "16px 'Audiowide', cursive";
	    ctx.fillStyle = "black";
	    ctx.fillText("Score: "+score, 8, 20);
	}
	function desenhalive() {
	    ctx.font = "16px 'Audiowide', cursive";
	    ctx.fillStyle = "black";
	    ctx.fillText("Lives: "+lives, canvas.width-75, 20);
	}

	function desenha() {
	    ctx.clearRect(0, 0, canvas.width, canvas.height);
	    desenhabloc();
	    desenhaBola();
	    desenhapad();
	    desenhascore();
	    desenhalive();
	    detectacoli();
	    
	    if(x + dx > canvas.width-b || x + dx < b) {
	        dx = -dx;
	    }
	    if(y + dy < b) {
	        dy = -dy;
	    }
	    else if(y + dy > canvas.height-b) {
	        if(x > paddleX && x < paddleX + largpad) {
	            dy = -dy;
	        }
	        else {
	            lives--;
	            if(!lives) {
	                alert("Fim de Jogo!!")
	                document.location.reload();
	            }
	            else {
	                x = canvas.width/2;
	                y = canvas.height-30;
	                dx = 3;
	                dy = -3;
	                paddleX = (canvas.width-largpad)/2;
	            }
	        }
	    }
	    
	    if(presdir && paddleX < canvas.width-largpad) {
	        paddleX += 7;
	    }
	    else if(presesq && paddleX > 0) {
	        paddleX -= 7;
	    }
	    
	    x += dx;
	    y += dy;
	    requestAnimationFrame(desenha);
	}
	desenha();
}


</script>
</body>